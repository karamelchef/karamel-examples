name: hopsBareMetalSingleNode
baremetal:
    username: jdowling
    
cookbooks:                                                                     
  kagent: 
    github: "karamelchef/kagent-chef"
    branch: "master"
  hops: 
    github: "hopshadoop/hops-hadoop-chef"
    branch: "master"
  hopsworks: 
    github: "hopshadoop/hopsworks-chef"
    branch: "master"
  ndb: 
    github: "hopshadoop/ndb-chef"
    branch: "master"

attrs:
  ndb:
    MaxNoOfConcurrentIndexOperations: '1000'
    RedoBuffer: '2M'
    MaxNoOfConcurrentTransactions: '500'
    DataMemory: '25'
    MaxNoOfConcurrentOperations: '5000'
    IndexMemory: '5'
    MaxDMLOperationsPerTransaction: '5000'
    TotalSendBufferMemory: '1m'
    LongMessageBuffer: '4M'
    TransactionInactiveTimeout: '10000'
    TransactionDeadlockDetectionTimeout: '10000'
  hopsworks:
    min_mem: '256'
    max_perm_size: '500'
    max_mem: '2000'
    
groups: 
  singlenode:
    size: 1 
    baremetal:
        ip: 127.0.0.1
    recipes:
        - kagent::install
        - ndb::mgmd
        - ndb::ndbd
        - ndb::mysqld
        - hops::ndb                                                    
        - hopsworks
        - hopsworks::dev
