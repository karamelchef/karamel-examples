name: HopsWorksOneNodeGCE
gce:
    type: n1-standard-8
    zone: europe-west1-b
    image: ubuntu-1404-trusty-v20150316

cookbooks:
  kagent:
    github: "karamelchef/kagent-chef"
    branch: "v0.1"
  apache_hadoop:
    github: "hopshadoop/apache-hadoop-chef"
    branch: "v2.4.0"
  hops:
    github: "hopshadoop/hops-hadoop-chef"
    branch: "v2.4.0"
  hopsworks:
    github: "hopshadoop/hopsworks-chef"
    branch: "master"
  ndb:
    github: "hopshadoop/ndb-chef"
    branch: "v7.5.3"
  hadoop_spark:
    github: "hopshadoop/spark-chef"
    branch: "v1.6.1"
  flink:
    github: "hopshadoop/flink-chef"
    branch: "v1.0.3"
  elastic:
    github: "hopshadoop/elasticsearch-chef"
    branch: "v2.1.2"
  zeppelin:
    github: "hopshadoop/zeppelin-chef"
    branch: "v0.6.0"
  kzookeeper:
    github: "hopshadoop/kzookeeper"
    branch: "v3.4.7"
  kkafka:
    github: "hopshadoop/kafka-cookbook"
    branch: "v0.10.0.0"
  epipe:
    github: "hopshadoop/epipe-chef"
    branch: "v0.2.2"
  livy:
    github: "hopshadoop/livy-chef"
    branch: "v0.3.0"
  drelephant:
    github: "hopshadoop/dr-elephant-chef"
    branch: "v2.0.3"


attrs:
  hops:
    use_hopsworks: "true"
  apache_hadoop:
    hdfs:
        user: glassfish
    yarn:
        user: glassfish
    mr:
        user: glassfish
  hadoop_spark:
    user: glassfish
  ntp:
    install: "true"
  flink:
    user: glassfish
  hopsworks:
    master:
       password: "adminpw"
  zeppelin:
    user: glassfish
  kagent:
    enabled: "true"

groups:
  hopsworks:
    size: 1
    recipes:
        - kagent
        - ndb::mgmd
        - ndb::ndbd
        - ndb::mysqld
        - hops::ndb
        - hops::rm
        - hops::nn
        - hops::dn
        - hops::nm
        - hops::jhs
        - hadoop_spark::yarn
        - hadoop_spark::historyserver
        - flink::yarn
        - elastic
        - livy
        - zeppelin
        - kzookeeper
        - kkafka
        - drelephant
        - epipe
        - hopsworks
